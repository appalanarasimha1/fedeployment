<div class="upload-modal">
  <div class="upload-modal-step">{{step !== 2 ? stepLabel : '' }}</div>
  <div *ngIf="step === 1">
    <div class="publish-summary">
      <div class="assets-details">
        <span>{{ getSelectedAssetsTitle() }}</span>
        <span style="color: gray;">{{ getSelectedAssetsSize() }}</span>
      </div>

      <div class="publish-summary-location flexible">
        <div class="flexible">
          <img src="../../assets/images/upload.png">
          <!-- <mat-icon>folder</mat-icon> -->
        <span style="margin-left: 10px; display: block;">{{ selectedFolder.title }}</span>
        </div>
        <div style="margin-left: 20px;" class="flexible">
          <!-- <mat-icon>calendar_today</mat-icon> -->
          <img src="../../assets/images/calendar.png">
          <span style="margin-left: 10px; display: block;">{{ showLocaleDate() }}</span>
        </div>

      </div>
    </div>

    <div class="publish-file-preview-groups" style="width: 100%;" >
      <div *ngFor="let doc of docs; let i = index" class="publish-file-preview">
        <div class="publish-file-preview-img">
          <img src alt="preview" class="preview-img"
            (error)="getAssetUrl($event, doc.contextParameters.thumbnail?.url)"/>
          <span>{{ doc.title }}</span>
          <div class="copyright-information">
             <div (click)="openCopyright(i)" *ngIf="!openCopyrightMap[i]">
              <img src="../../assets/images/add-copyright-golden.svg" alt="Add copyright information" /> Add copyright information
             </div>
             <div *ngIf="openCopyrightMap[i] || this.copyrightUserMap[i]" class="copyright-form">
                <ul>
                   <li>
                      <img (click)="closeCopyright(i)" src="../../assets/images/add-circle-brown.svg" alt="Copyright Owner" />
                   </li>
                   <li>
                      <div class="copyright-input-block">
                       â’¸ <input type="text" placeholder="Copyright Owner" [(ngModel)]="copyrightUserMap[i]" class="copyright-input">
                      </div>
                   </li>
                   <li>
                       <ng-select [items]="years"
                          bindLabel="name"
                          [(ngModel)]="copyrightYearMap[i]"
                          placeholder="Year" ngDefaultControl>
                       </ng-select>
                   </li>
                </ul>
             </div>
          </div>
        </div>
        <div class="publish-file-preview-access">
          <div class="upload-form-input row">
            <div class="col-xl-4">
              <label for="confidentiality">Confidentiality</label>
            </div>
            <div class="col-xl-8 ">
              <select name="confidentiality" (change)="onSelectConfidentiality($event.target.value, i)" id="confidentiality" [ngClass]="{'goldenText': customConfidentialityMap[i] }">
                <option hidden disabled selected value></option>
                <option [selected]="customConfidentialityMap[i] === c.value" *ngFor="let c of CONFIDENTIALITY | keyvalue" value="{{c.value}}">{{ c.value }}</option>
              </select>
            </div>

          </div>
          <div class="upload-form-input row">
            <div class="col-xl-4">
              <label for="access">Show to</label>
            </div>
            <div class="col-xl-8">
              <select name="access" (change)="onSelectAccess($event.target.value, i)" id="access" [ngClass]="{'goldenText': customAccessMap[i] }" >
                <option hidden disabled selected value></option>
                <option [selected]="customAccessMap[i] === c.value"  [disabled]="checkAccessOptionDisabled(c.value, i)" *ngFor="let c of ACCESS | keyvalue" value="{{c.value}}">{{ c.value }}</option>
              </select>
            </div>

          </div>
          <div *ngIf="checkShowUserDropdown(i)" class="upload-form-input row" style="display: flex;">
            <div class="col-xl-4">
              <label for="user">Users</label>
            </div>
            <div class="col-xl-8">
              <ng-select
              [items]="userList$ | async"
              bindLabel="id"
              bindValue="id"
              [multiple]="true"
              [hideSelected]="true"
              [trackByFn]="trackByFn"
              [minTermLength]="2"
              [loading]="userLoading"
              typeToSearchText="Search users"
              [typeahead]="userInput$"
              [(ngModel)]="customUsersMap[i]"
              [ngClass]="{'goldenText': customUsersMap[i]}">
              <ng-template ng-option-tmp let-item="item">
                {{item.id}} ({{item.fullname}})
              </ng-template>
            </ng-select>
            </div>

          </div>
          <div class="upload-form-input row">
            <div class="col-xl-4">
               <label for="allow">Allow use in</label>
            </div>
            <div class="col-xl-8">
               <select name="allow" (change)="onSelectAllow($event.target.value, i)" id="allow" [ngClass]="{'goldenText': customAllowMap[i] }" >
               <option [selected]="customAllowMap[i] === c.value" *ngFor="let c of ALLOW | keyvalue" value="{{c.value}}">{{ c.value }}</option>
               </select>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div *ngIf="step === 2">
    <div class="finish-screen">
      <!-- <mat-icon>upload</mat-icon> -->
      <span>Your assets have been successfully updated.</span>
      <div class="destination-folder">
        <!-- <img src="./assets/images/folder-img.png" alt="folder" /> -->
        <span class="assetName">{{ selectedFolder.title }}</span>
      </div>
      <div (click)="closeModal()" class="close-modal">
        <!-- <mat-icon>close</mat-icon> -->
        Close
      </div>
    </div>
  </div>
  <div class="button-groups" *ngIf="step !== 2">
    <button (click)="closeModal()" class="cancel-btn">Cancel</button>
    <div class="progress-btns">
      <button class="upload-btn" (click)="toNextStep()">Update</button>
    </div>
  </div>
</div>