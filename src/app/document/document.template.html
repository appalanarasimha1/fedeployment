<!-- <div class="document">
  <h4>{{document.title}}</h4>
  <a href="/nuxeo/nxdoc/default/{{document.uid}}/view_documents">
    <img src="{{document.contextParameters?.thumbnail.url}}" /> 
  </a>
</div> -->
<app-loader [show]="loading"></app-loader>
<section class="min-height">
  <section>
    <div
      *ngIf="recentlyViewed && recentlyViewed.length && !videos.entries.length && !images.entries.length && !files.entries.length && !docs.length"
      class="container">
      <div class="row flexible" style="justify-content: space-between;">
        <div class="col-xl-4 col-md-4 mb-4">
          <h2 class=" commonHeading">Recently viewed</h2>
        </div>
        <div class="col-xl-2 col-md-2 mb-4">
          <p (click)="clearRecentlyViewed()" class="clear " style="color: #8E6B0B;">Clear</p>
        </div>
        <div class="col-xl-12 col-md-12">
          <ngx-masonry [options]="myOptions" [ordered]="true" (layoutComplete)="completeLoadingMasonry($event)"
            [updateLayout]="updateMasonryLayout">
            <div ngxMasonryItem class="masonry-item" *ngFor="let file of recentlyViewed; let i = index">
              <img id="fileId" src (error)="getAssetUrl($event, file.contextParameters.thumbnail.url)" alt=""
                (click)="open(preview, file, 'image')" />
              <div class="cardBlock newDesign pa-0">
                <div [ngClass]="{'activeHover': file.isSelected}">
                  <div class="form-group-custom">
                    <input type="checkbox" id="html{{i}}" [checked]="file.isSelected" [(ngModel)]="file.isSelected"
                      (change)="selectImage($event, file, i)">
                    <label for="html{{i}}"></label>
                  </div>
                  <div class="hover-icon-group">
                    <div class="hover-icon star-icon"
                      [ngClass]="{'active': file.contextParameters.favorites.isFavorite}"
                      (click)="markFavourite(file, 'recent')"></div>
                    <div class="hover-icon plus-icon" placement="top" ngbTooltip="This function will be available soon"
                      style="cursor: not-allowed;"></div>
                    <a class="hover-icon download-icon"
                      href="{{findOriginalUrlFromViews(file.properties['picture:views'])}}"></a>
                  </div>
                  <div class="mouse-hover-bg" (click)="open(preview, file, 'image')"></div>
                </div>
              </div>
            </div>
          </ngx-masonry>
        </div>
      </div>
    </div>
    <div *ngIf="calculateNoResultScreen()" class="row">
      <div class="col-xl-12 col-md-12 ">
        <div class="text-center" style="height: 600px;">
          <img src="../../assets/images/binacxulor.svg" style="width: 50px;">
          <h2 class="noresult pb-3 pt-4">No recently viewed files</h2>
          <p class="searchcontent">Your recently viewed files will appear here.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="search-subpage pt-2 pb-5">
    <div
      *ngIf="!loading && !showRecentlyViewed && !videos.entries.length && !images.entries.length && !files.entries.length && !docs.length"
      class="row">
      <div class="col-xl-12 col-md-12 ">
        <div class="text-center" style="height: 600px;">
          <img src="../../assets/images/search.svg" style="width: 50px;">
          <h2 class="noresult pb-3 pt-4">No results found</h2>
          <p class="searchcontent">Try adjusting your search or filter to find what you are looking for.</p>
        </div>
      </div>
    </div>
    <div *ngIf="videos.entries.length || images.entries.length || docs.length || files.entries.length"
      class="container">
      <div class="main-headingSearch flexible pb-4" style="align-items: baseline;">
        <span class="commonHeading">{{searchTerm.ecm_fulltext}}</span>
        <span class="numberFiles">{{(videos?.resultsCount || 0) + (images?.resultsCount || 0) + (files?.resultsCount ||
          0)}} files</span>
      </div>
      <div class="row flexible" style="justify-content: space-between;">
        <div class="col-xl-4">
          <span><b>Sort by:</b> </span>
          <div ngbDropdown class="d-inline-block mb-4 assetsDropdown">

            <button class="btn" id="dropdownBasic4" ngbDropdownToggle>{{sortValue || 'All assets'}}</button>
            <div ngbDropdownMenu aria-labelledby="dropdownBasic4" class="dropdownBasic4">
              <button (click)="dropdownMenu($event); sortValue = 'Created'" ngbDropdownItem
                value='dc:created'>Created</button>
              <button (click)="dropdownMenu($event); sortValue = 'Modified'" ngbDropdownItem
                value='dc:modified'>Modified</button>
              <button (click)="dropdownMenu($event); sortValue = 'Last Contibutor'" ngbDropdownItem
                value='dc:lastContributor'>Last Contibutor</button>
              <!-- <button (click)="dropdownMenu($event); sortValue = 'State'" ngbDropdownItem value='state'>State</button>
              <button (click)="dropdownMenu($event); sortValue = 'Nature'" ngbDropdownItem value='dc:nature'>Nature</button>
              <button (click)="dropdownMenu($event); sortValue = 'Coverage'" ngbDropdownItem value='dc:coverage'>Coverage</button> -->
            </div>
          </div>
        </div>
        <div class="col-xl-4">

        </div>
        <div class="col-xl-4 " style="float: right;">
          <!-- slider -->
          <!-- <div>
              <input type="checkbox" id="switch" class="checkbox" />
              <label for="switch" class="toggle " >    
                <div class="flexible" style="justify-content: space-between;display: flex;">
                  <p><img src="../../assets/images/mostrecent-1.svg" width="12">Most Recent</p>   <p><img src="../../assets/images/most-relevant.svg" width="12">Most Relevant</p>      
                </div>  
              </label>
            </div> -->

          <!-- end -->
          <div id="view" class="e-btn-group flexible">
            <div>
              <input type="radio" (change)="viewChange($event)" id="left" name="align" value="gallery" checked />
              <label class="e-btn" for="left"><img src="../../assets/images/gallery view.png"
                  style="width: 22px;"></label>
            </div>
            <div>
              <input type="radio" (change)="viewChange($event)" id="right" name="align" value="list" />
              <label class="e-btn" for="right"><img src="../../assets/images/list view.png"
                  style="width: 22px;"></label>
            </div>
          </div>
        </div>
      </div>

      <!-- <div *ngIf="tagsMetadata && tagsMetadata.buckets && tagsMetadata.buckets.length > 0">
        <span>Related Tags:</span>
        <div class="tags-metadata pb-5">
          <ul class="flexible">
            <li *ngFor="let bucket of tagsMetadata.buckets; let i = index">
              <a style="cursor: pointer;" >{{bucket.key}} ({{bucket.docCount}})</a>
            </li>
          </ul>
        </div>
      </div> -->

      <div *ngIf="getDataLength(images.entries, 'picture')" class="row">
        <div class="col-xl-12 flexible" style="justify-content: space-between;">
          <p class="imgHead pb-4">Images</p>
          <a class="fileCount pb-4">{{images.resultsCount}} images</a>
        </div>
        <!-- Gallery -->

        <!-- <ul *ngIf="!showListView" class="set-width portfolio-list"
          style="list-style: none;margin: unset; padding: 0; align-items: unset;">
          <li *ngFor="let image of images.entries.slice(0, imageSliceInput); let i = index">


            <div class="cardBlock pa-0" style="">
              <div class="cardBlockContent">
                <div class="row">
                  <div (click)="open(preview, image, 'image')" class="col-xl-12 col-md-12">
                      <img src="{{getAssetUrl(image.contextParameters.thumbnail.url)}}" class="w-100 shadow-1-strong" alt=""/>
                      </div>
                </div>
              </div>
              <div [ngClass]="{'activeHover': image.isSelected}">
               
                    <div class="form-group-custom">
                      <input type="checkbox" id="html{{i}}"  [checked]="image.isSelected" [(ngModel)]="image.isSelected" (change)="selectImage($event, image, i)">
                      <label for="html{{i}}"></label>
                    </div>
                    <div class="hover-icon-group">
                      <div class="hover-icon star-icon" [ngClass]="{'active': image.contextParameters.favorites.isFavorite}"></div>
                      <div class="hover-icon plus-icon" (click)="open(preview, image, 'image')"></div>
                      <a class="hover-icon download-icon" href="{{findOriginalUrlFromViews(image.properties['picture:views'])}}"></a>
                    </div>
                    <div class="mouse-hover-bg" (click)="open(preview, image, 'image')"></div>
              </div>
            </div>
          </li>
        </ul> -->

        <div *ngIf="!showListView">
          <div class="row">
            <div class="col-xl-12 col-md-12">
              <ngx-masonry [options]="myOptions" [ordered]="true" (layoutComplete)="completeLoadingMasonry($event)">
                <div ngxMasonryItem class="masonry-item"
                  *ngFor="let image of images.entries.slice(0, imageSliceInput); let i = index">
                  <img src (error)="getAssetUrl($event, image.contextParameters.thumbnail.url)"
                    alt="{{image.properties['dc:title']}}" (click)="open(preview, image, 'image')" />
                  <div class="cardBlock newDesign pa-0">
                    <div [ngClass]="{'activeHover': image.isSelected}">
                      <div class="form-group-custom">
                        <input type="checkbox" id="html{{i}}" [checked]="image.isSelected"
                          [(ngModel)]="image.isSelected" (change)="selectImage($event, image, i)">
                        <label for="html{{i}}"></label>
                      </div>
                      <div class="hover-icon-group">
                        <div class="hover-icon star-icon"
                          [ngClass]="{'active': image.contextParameters.favorites.isFavorite}"
                          (click)="markFavourite(image, false)"></div>
                        <div class="hover-icon plus-icon" placement="top"
                          ngbTooltip="This function will be available soon" style="cursor: not-allowed;">
                        </div>
                        <a class="hover-icon download-icon"
                          href="{{findOriginalUrlFromViews(image.properties['picture:views'])}}"></a>
                      </div>
                      <div class="mouse-hover-bg" (click)="open(preview, image, 'image')"></div>
                    </div>
                  </div>
                </div>
              </ngx-masonry>
            </div>
          </div>
        </div>

        <div class="col-xl-12 col-md-12">
          <div *ngIf="showListView" class="card-view">
            <ul class="flexible">
              <li *ngFor="let image of images.entries.slice(0, imageSliceInput); let i = index">
                <div class="cardBlock" style="border-radius: 8px;">
                  <div class="cardBlockContent">
                    <div class="row">
                      <div class="col-xl-6 col-md-6" style="position: relative;">
                        <p>{{image.properties['dc:title']}}</p>
                        <div class="username">
                          <span>
                            <img src="../../assets/images/black-user.png">
                          </span>
                          {{image.properties['dc:creator'].id}}
                        </div>
                      </div>
                      <div (click)="open(preview, image, 'image')" class="col-xl-6 col-md-6">
                        <img src (error)="getAssetUrl($event, image.contextParameters.thumbnail.url)"
                          class="w-100 shadow-1-strong rounded listViewImg"
                          style="width: 100%;border-radius: 8px !important;" alt="" />

                      </div>
                    </div>
                  </div>
                  <div [ngClass]="{'activeHover': image.isSelected}">

                    <div class="form-group-custom">
                      <input type="checkbox" id="html{{i}}" [checked]="image.isSelected" [(ngModel)]="image.isSelected"
                        (change)="selectImage($event, image, i)">
                      <label for="html{{i}}"></label>
                    </div>

                    <div class="hover-icon-group">
                      <div class="hover-icon star-icon"
                        [ngClass]="{'active': image.contextParameters.favorites.isFavorite}"
                        (click)="markFavourite(image, false)"></div>
                      <div class="hover-icon plus-icon" placement="top"
                        ngbTooltip="This function will be available soon" style="cursor: not-allowed;">
                      </div>
                      <a class="hover-icon download-icon"
                        href="{{findOriginalUrlFromViews(image.properties['picture:views'])}}"></a>
                    </div>
                    <div class="mouse-hover-bg" (click)="open(preview, image, 'image')"></div>

                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div *ngIf="!hideImageShowMoreBtn" (click)="showMore('image')"
          style="text-align: center; cursor: pointer;color: #8E6B0B;">Show more</div>
      </div>
      <div *ngIf="getDataLength(videos.entries, 'video')" class="row pt-5">
        <div class="col-xl-12 flexible" style="justify-content: space-between;">
          <p class="imgHead pb-4">Videos</p>
          <a class="fileCount pb-4">{{videos.resultsCount}} videos</a>
        </div>

        <div class="col-xl-12" *ngIf="!showListView">
          <!--  *ngIf="!showListView" -->
          <ul class="flexible videosList">
            <li *ngFor="let v of videos.entries.slice(0, videoSliceInput); let i = index" class="">
              <a href="javascript:void(0);" (click)="open(preview, v, 'video')" class="videoIconn">
                <img src (error)="getAssetUrl($event, v.contextParameters.thumbnail.url)">
              </a>
              <div class="cardBlock newDesign pa-0">
                <div [ngClass]="{'activeHover': v.isSelected}">
                  <div class="form-group-custom">
                    <input type="checkbox" id="video-{{i}}" [checked]="v.isSelected" [(ngModel)]="v.isSelected"
                      (change)="selectImage($event, v, i)">
                    <label for="video-{{i}}"></label>
                  </div>
                  <div class="hover-icon-group">
                    <div class="hover-icon star-icon" [ngClass]="{'active': v.contextParameters.favorites.isFavorite}"
                      (click)="markFavourite(v, 'recent')"></div>
                    <div class="hover-icon plus-icon" title="Coming soon"></div>
                    <a class="hover-icon download-icon" href="{{v?.properties['file:content']?.data || ''}}"></a>
                  </div>
                  <div class="mouse-hover-bg" (click)="open(preview, v, 'video')"></div>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <div class="col-xl-12 col-md-12">
          <div *ngIf="showListView" class="card-view">
            <ul class="flexible videosList1">
              <li *ngFor="let v of videos.entries.slice(0, videoSliceInput); let i = index">
                <div class="cardBlock" style="border-radius: 8px;">
                  <div class="cardBlockContent">
                    <div class="row">
                      <div class="col-xl-6 col-md-6" style="position: relative;">
                        <p>{{v.properties['dc:title']}}</p>
                        <div class="username">
                          <span>
                            <img src="../../assets/images/black-user.png">
                          </span>
                          {{v.properties['dc:creator'].id}}
                        </div>
                      </div>
                      <div class="col-xl-6 col-md-6">
                        <a href="javascript:void(0);" (click)="open(preview, v, 'video')">
                          <img src (error)="getAssetUrl($event, v.contextParameters.thumbnail.url)"
                            class="w-100 shadow-1-strong rounded listViewImg"
                            style="width: 100%;border-radius: 8px !important;">
                        </a>
                      </div>
                    </div>
                  </div>
                  <div [ngClass]="{'activeHover': v.isSelected}">

                    <div class="form-group-custom">
                      <input type="checkbox" id="video-{{i}}" [checked]="v.isSelected" [(ngModel)]="v.isSelected"
                        (change)="selectImage($event, v, i)">
                      <label for="video-{{i}}"></label>
                    </div>

                    <div class="hover-icon-group">
                      <div class="hover-icon star-icon" [ngClass]="{'active': v.contextParameters.favorites.isFavorite}"
                        (click)="markFavourite(v, false)"></div>
                      <div class="hover-icon plus-icon"></div>
                      <a class="hover-icon download-icon" href="{{v.properties['file:content'].data || ''}}"></a>
                    </div>
                    <div class="mouse-hover-bg" (click)="open(preview, v, 'video')"></div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <!-- TODO: video card view -->
        <!-- <div class="col-xl-12 col-md-12">
            <div *ngIf="showListView" class="card-view">
              <ul class="flexible">
                <li *ngFor="let v of videos.slice(0, videoSliceInput); let i = index">
                  <div class="row">
                    <div class="col-xl-6 col-md-6" style="position: relative;">
                      <p>{{v.properties['dc:title']}}</p>
                      <div class="username">
                        <a href="{{baseUrl}}/nuxeo/ui/#!/browse{{v.path}}">
                          <img src="{{getAssetUrl(v.contextParameters.thumbnail.url)}}">
                        </a>
                        {{v.properties['dc:creator'].id}}
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div> -->


        <div *ngIf="!hideVideoShowMoreBtn" (click)="showMore('video')"
          style="text-align: center; cursor: pointer;color: #8E6B0B;">
          Show more</div>

      </div>
      <div *ngIf="getDataLength(files.entries, 'file')" class="row pt-5">
        <div class="col-xl-12 flexible" style="justify-content: space-between;">
          <p class="imgHead pb-4">Files</p>
          <a class="fileCount pb-4">{{files.resultsCount}} files</a>
        </div>

        <div class="col-xl-12" *ngIf="!showListView">
          <ul class="flexible videosList">
            <li *ngFor="let v of files.entries.slice(0, fileSliceInput); let i = index" class="">
              <a href="javascript:void(0);" (click)="open(preview, v, 'file')">
                <!--  (error)="getAssetUrl($event, v.contextParameters.thumbnail.url)" src="../../assets/images/Pin_16.png"-->
                <img  src="../../assets/images/pdf.png">
                
              </a>
              <div class="pdfWhiteBlock">
                <div class="flexible pb-2" style="justify-content: space-between ;">
                  <p>{{v.title}}</p>
                  <div style="display: inline-grid;
                  text-align: center;">
                    <img src="../../assets/images/Read.svg" style="    width: 26px;
                    margin: auto;">
                    <!-- <span>3 mins</span> -->
                  </div>
                  
                </div>
                <span>{{v['dc:description']}}</span>
              </div>
              <div class="cardBlock newDesign pa-0">
                <div [ngClass]="{'activeHover': v.isSelected}">
                  <div class="form-group-custom">
                    <input type="checkbox" id="file-{{i}}" [checked]="v.isSelected" [(ngModel)]="v.isSelected"
                      (change)="selectImage($event, v, i)">
                    <label for="file-{{i}}"></label>
                  </div>
                  <div class="hover-icon-group">
                    <div class="hover-icon star-icon" [ngClass]="{'active': v.contextParameters.favorites.isFavorite}"
                      (click)="markFavourite(v, 'recent')"></div>
                    <div class="hover-icon plus-icon" title="Coming soon"></div>
                    <a class="hover-icon download-icon" href="{{v?.properties['file:content']?.data}}"></a>
                  </div>
                  <div class="mouse-hover-bg" (click)="open(preview, v, 'file')"></div>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <div class="col-xl-12 col-md-12">
          <div *ngIf="showListView" class="card-view">
            <ul class="flexible videosList1">
              <li *ngFor="let v of files.entries.slice(0, fileSliceInput); let i = index">
                <div class="cardBlock" style="border-radius: 8px;">
                  <div class="cardBlockContent">
                    <div class="row">
                      <div class="col-xl-6 col-md-6" style="position: relative;">
                        <p>{{v.properties['dc:title']}}</p>
                        <div class="username">
                          <span>
                            <img src="../../assets/images/black-user.png">
                          </span>
                          {{v.properties['dc:creator'].id}}
                        </div>
                      </div>
                      <div class="col-xl-6 col-md-6">
                        <a href="javascript:void(0);" (click)="open(preview, v, 'file')">
                          <img src (error)="getAssetUrl($event, v.contextParameters.thumbnail.url)"
                            class="w-100 shadow-1-strong rounded listViewImg"
                            style="width: 100%;border-radius: 8px !important; max-width: 250px;">
                        </a>
                      </div>
                    </div>
                  </div>
                  <div [ngClass]="{'activeHover': v.isSelected}">

                    <div class="form-group-custom">
                      <input type="checkbox" id="file-{{i}}" [checked]="v.isSelected" [(ngModel)]="v.isSelected"
                        (change)="selectImage($event, v, i)">
                      <label for="file-{{i}}"></label>
                    </div>

                    <div class="hover-icon-group">
                      <div class="hover-icon star-icon" [ngClass]="{'active': v.contextParameters.favorites.isFavorite}"
                        (click)="markFavourite(v, false)"></div>
                      <div class="hover-icon plus-icon"></div>
                      <a class="hover-icon download-icon" href="{{v?.properties['file:content']?.data}}"></a>
                    </div>
                    <div class="mouse-hover-bg" (click)="open(preview, v, 'file')"></div>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div *ngIf="!hideFileShowMoreBtn" (click)="showMore('file')"
          style="text-align: center; cursor: pointer;color: #8E6B0B;">
          Show more</div>

        <!-- <div *ngIf="getDataLength(docs, 'docs')" class="row pt-5">
          <div class="col-xl-12 flexible" style="justify-content: space-between;">
            <p class="imgHead pb-4">Documents</p>
            <a class="fileCount pb-4" href="#">{{docs.length}} documents</a>
          </div>
          <div class="col-xl-12">
            <ul class="flexible docList">
              <li *ngFor="let doc of docs" class="">
                <a href="{{redirectBaseUrl}}/nuxeo/ui/#!/browse{{doc.path}}">
                  <img src="../../assets/images/Pin_16.png">
                </a>
              </li>
            </ul>
          </div>

        </div> -->
      </div>
    </div>
  </section>

  <ng-template #preview let-modal class="imgPopUpTab">
    <div class="modal-header">
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <!-- <span aria-hidden="true">&times;</span> -->
        <span aria-hidden="true"><img src="../../assets/images/modalclose.svg"></span>
      </button>
    </div>
    <div class="modal-body ">
      <div class="modalHead">
        <div class="row flexible" style="justify-content: space-between;">
          <div class="col-xl-4 col-md-4">
            <!-- <img src="../../assets/images/User.svg" style="width: 50px;"> -->
            <img src="../../assets/images/black-user.png" style="width: 50px;
            margin-right: 10px;">
            <span>{{selectedFile.properties['dc:creator'].id}}</span>
          </div>
          <div class="col-xl-4 col-md-4">
            <ul class="flexible">
              <li class="customtooltip">
                <a placement="bottom" ngbTooltip="Favourite">
                  <img *ngIf="selectedFile.contextParameters.favorites.isFavorite"
                    (click)="markFavourite(selectedFile, false)" src="../../assets/images/yellow-star.svg">
                  <img *ngIf="!selectedFile.contextParameters.favorites.isFavorite"
                    (click)="markFavourite(selectedFile, true)" src="../../assets/images/blackstar.svg">
                </a>
              </li>
              <li class="">
                <a placement="bottom" ngbTooltip="This function will be available soon ">
                  <img src="../../assets/images/add-collectionbadge.svg" style="width: 20px;">
                </a>
              </li>
              <li class="customtooltip">
                <a *ngIf="selectedFile.type === 'Picture'" placement="bottom" ngbTooltip="Download">

                  <div ngbDropdown class="d-inline-block downloadDrop">
                    <a class="" id="dropdownBasic1" placement="bottom-left" ngbDropdownToggle><img
                        src="../../assets/images/downlload-arrow-black.svg"></a>
                    <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                      <a *ngFor="let view of selectedFile.properties['picture:views']"
                        href="{{getAssetUrl(null, view.content.data) || ''}}" style="color: white"
                        ngbDropdownItem>{{view.width}} * {{view.height}}
                        <span>{{getDownloadFileEstimation(view.content.length)}}</span>
                      </a>
                    </div>
                  </div>
                </a>
                <a *ngIf="selectedFile.type !== 'Picture'" placement="bottom" ngbTooltip="Download">
                  <a href="{{getAssetUrl(null, selectedFile?.properties['file:content']?.data) || ''}}"
                    placement="bottom-left"><img src="../../assets/images/black-downloadicon.svg"></a>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="popupTabSec">

        <app-loader-small [show]="modalLoading"></app-loader-small>
        <img *ngIf="selectedFile.type === 'Picture'"  src (error)="getAssetUrl($event, selectedFileUrl)" style="width: 100%;">
        <div *ngIf="selectedFile.type === 'Video'" style="height: 600;position: relative;">

          <video controls style="width: 100%; height: 600px;" src (error)="getAssetUrl($event, selectedFileUrl)">
            <!-- <source src="{{selectedFileUrl}}"> -->
            <!-- <source> -->
          </video> 
        </div>
        <div *ngIf="selectedFile.type === 'File'">
          <!-- [src]="getAssetUrl(null, selectedFileUrl) | safe" -->
          <!-- <iframe style="width: 100%; height: 600px;" [src]="getAssetUrl(null, selectedFileUrl) | safe"></iframe> -->
          <pdf-viewer [src]="getAssetUrl(null, selectedFileUrl)"
              [render-text]="true"
              style="display: block; width: 100%; height: 600px;"
              [original-size]="false"
              [autoresize]="true"
              [show-borders]="false"
              (on-progress)="onFileProgress($event)"
              (after-load-complete)="afterFileLoad($event)"
              (pages-initialized)="pageInitialized($event)"
          ></pdf-viewer>
          <!-- <div ()="getAssetUrl($event, selectedFileUrl) | safe"></div> -->
        </div>
        <div class="myTabContentMain" [ngClass]="{'hide': !showShadow}">
          <div class="tab-content myTabContent" id="myTabContent">
            <!-- use class myTabContent -->
            <div class="tab-pane fade show active" id="timeline" role="tabpanel" aria-labelledby="home-tab">
              <div class="timeline-content">
                <ul>
                  <li *ngFor="let log of selectedFile.contextParameters.audit">
                    <p><span>{{log.principalName}}</span> {{getEventString(log.eventId)}} {{getTime(log.eventDate,
                      false)}} ago</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
              <div class="comment-content">
                <ul>
                  <li *ngFor="let comment of comments" class="flexible" style="align-items: unset;">
                    <div>
                      <img src=".../../assets/images/black-user.png">
                    </div>
                    <div>
                      <p>{{comment.author}} <span>{{getTime(comment.creationDate, false)}} ago</span></p>
                      <p>{{comment.text}}</p>
                    </div>
                  </li>
                </ul>
                <form (submit)="saveComment(commentText)">
                  <input type="text" [(ngModel)]="commentText" class="commentInput" name="comment"
                    placeholder="Write a comment here">
                  <img (click)="saveComment(commentText)" src="../../assets/images/Btnentercomment.svg"
                    class="enterComment" style="cursor: pointer;">
                </form>
              </div>
            </div>
            <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
              <div class="info-content">
                <div class="row">
                  <div class="col-xl-6 col-md-6">
                    <ul>
                      <li>
                        Created {{toDateString(selectedFile?.properties['dc:created'])}} by
                        <span style="color: #EBC03F;">{{selectedFile?.properties['dc:creator']?.id}}</span>
                      </li>

                      <li>State <br><span style="opacity: 0.7;">{{selectedFile?.state}}</span></li>

                      <li>Version</li>

                      <li>Last Modified <br><span
                          style="opacity: 0.7;">{{toDateString(selectedFile?.lastModified)}}</span></li>

                      <li>Contributors <br><span
                          style="color: #EBC03F;">{{getNames(selectedFile?.properties['dc:contributors'])}}</span>
                      </li>

                      <li>
                        Dimensions <br><span style="opacity: 0.7;">{{selectedFile.properties['picture:info']?.width}} x
                          {{selectedFile.properties['picture:info']?.height}}</span>
                      </li>

                      <li>
                        Format <br><span
                          style="opacity: 0.7;">{{selectedFile.properties['picture:info']?.format}}</span>
                      </li>
                      <li>
                        Colour Profile <br><span
                          style="opacity: 0.7;">{{selectedFile.properties['picture:info']?.colorSpace}}</span>
                      </li>
                      <li>
                        Bit Depth per Channel <br><span
                          style="opacity: 0.7;">{{selectedFile.properties['picture:info']?.depth}}</span>
                      </li>
                      <li>
                        Weight <br><span

                        style="opacity: 0.7;">{{getDownloadFileEstimation(selectedFile?.properties['file:content']?.length)}}</span>
                      </li>
                    </ul>
                  </div>
                  <div class="col-xl-6 col-md-6">
                    <ul>
                      <li>
                        Description <br><span style="opacity: 0.7;">{{selectedFile?.properties['dc:description'] ||
                          selectedFile?.properties['imd:image_description']}}</span>
                      </li>
                      <li>EXIF
                        <br>
                        Date <span style="opacity: 0.7;">{{selectedFile?.properties['dc:created']}}</span>
                        <br>
                        Orientation <span style="opacity: 0.7;">{{selectedFile?.properties['imd:orientation']}}</span>
                        <br>
                        Aperture <span style="opacity: 0.7;">{{selectedFile?.properties['imd:fnumber']}}</span>
                        <br>
                        Exposure <span style="opacity: 0.7;">{{selectedFile?.properties['imd:exposure_time']}}</span>
                        <br>
                        ISO <span style="opacity: 0.7;">{{selectedFile?.properties['imd:iso_speed_ratings']}}</span>
                        <br>
                        Focal Length <span style="opacity: 0.7;">{{selectedFile?.properties['imd:focalLength']}}</span>
                      </li>
                      <li>IPTC
                        <br>
                        Copyright <span style="opacity: 0.7;">{{selectedFile?.properties['imd:copyright']}}</span>
                        <br>
                        Rights <span style="opacity: 0.7;">{{selectedFile?.properties['dc:rights']}}</span>
                        <br>
                        Source <span style="opacity: 0.7;">{{selectedFile?.properties['picture:source']}}</span>
                        <br>
                        Description <span style="opacity: 0.7;">{{selectedFile?.properties['dc:description']}}</span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="sub-body-modal flexible" style="justify-content: space-between; align-items: unset;">
        <div class="mb-4" style="width: 78%;">
          <span class="main-heading">{{selectedFile?.properties['dc:title']}}</span>
          <span class="yellowBtn">Internal Use Â©</span>
          <h5 class="pt-3 weightSize" >{{getDownloadFileEstimation(selectedFile?.properties['file:content']?.length || null)}}</h5>
        </div>

        <div class="flexible" style="align-items: unset;justify-content: end;width: 20%;">
          <ul class="nav nav-tabs iconsList iconsTab" id="myTab" role="tablist">
            <li class="nav-item customtooltip" role="presentation">
              <a class="nav-link " id="home-tab" data-bs-toggle="tab" placement="bottom" ngbTooltip="Timeline"
                (click)="openInfo('timeline')" [ngClass]="{'active': activeTabs['timeline']}" href="#timeline"
                role="tab" aria-controls="home" aria-selected="true"><img src="../../assets/images/clock.svg"></a>

            </li>
            <li class="nav-item customtooltip" role="presentation">
              <a class="nav-link " id="profile-tab" data-bs-toggle="tab" placement="bottom" ngbTooltip="Comments"
                (click)="openInfo('comments')" [ngClass]="{'active': activeTabs['comments']}" href="#profile" role="tab"
                aria-controls="profile" aria-selected="false"><img src="../../assets/images/Comments.svg"></a>
            </li>
            <li class="nav-item customtooltip" role="presentation">
              <a class="nav-link " id="contact-tab" data-bs-toggle="tab" placement="bottom" ngbTooltip="Info"
                (click)="openInfo('info')" [ngClass]="{'active': activeTabs['info']}" href="#contact" role="tab"
                aria-controls="contact" aria-selected="false">
                <img src="../../assets/images/Info.svg"></a>
            </li>
          </ul>

          <ul class="iconsList">
            <li>
              <a>
                <div ngbDropdown class="d-inline-block downloadDrop settingsDropdown">
                  <a class="" id="dropdownBasic2" placement="bottom-left" ngbDropdownToggle><img
                      src="../../assets/images/threedots.svg" style="height: 18px;"></a>
                  <div ngbDropdownMenu aria-labelledby="dropdownBasic2" class="dropdownBasic2">
                    <a ngbDropdownItem placement="bottom" ngbTooltip="This function will be available soon">Share</a>
                    <a ngbDropdownItem placement="bottom" ngbTooltip="This function will be available soon">Publish
                      file</a>
                    <a ngbDropdownItem placement="bottom" ngbTooltip="This function will be available soon">Stop
                      notifications</a>
                    <a ngbDropdownItem placement="bottom" ngbTooltip="This function will be available soon">Add to
                      clipboard</a>
                    <a ngbDropdownItem placement="bottom" ngbTooltip="This function will be available soon">Export</a>
                    <a ngbDropdownItem placement="bottom" ngbTooltip="This function will be available soon">Start
                      process</a>
                    <a ngbDropdownItem placement="bottom" ngbTooltip="This function will be available soon">Replace
                      file</a>
                    <a ngbDropdownItem placement="bottom" ngbTooltip="This function will be available soon">Delete
                      file</a>
                  </div>
                </div>
              </a>
            </li>
          </ul>
        </div>

        <div class="search-tags  pb-5">
          <ul class="flexible">
            <li *ngFor="let tag of tags; let i = index">
              <a style="cursor: pointer;">{{tag}}</a>
            </li>
            <li>
              <img *ngIf="!showTagInput" src="../../assets/images/add-circle.svg" (click)="showTagInput=true"
                style="margin-left: 6px; width: 32px;">
              <form *ngIf="showTagInput" (submit)="addTag(inputTag)" style="margin-left: 6px;">
                <input class="tag-input" type="text" [(ngModel)]="inputTag" name="tag" placeholder="Add new tag" />
              </form>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </ng-template>

  <div *ngIf="fileSelected.length" class="footer-listing">
    <div class="row">
      <div class="col-md-6 footer-add-items">
        <span>{{fileSelected.length}} item(s) selected</span>
        <a (click)="clearSelected()">Clear</a>
      </div>
      <!-- <div class="col-md-4">
        <img src="../../assets/images/synchronize-arrow-clock-footer.svg" alt="" class="footer-icons">
        <img src="../../assets/images/synchronize-arrow-clock-footer-1.svg" alt="" class="footer-icons">
      </div> -->
      <div class="col-md-6">
        <img src="../../assets/images/download-all-as-zip.svg" placement="top"
          ngbTooltip="This function will be available soon" alt="" class="footer-icons"
          style="    cursor: not-allowed;opacity: 0.4;">
        <img src="../../assets/images/plus-footer.svg" alt="" class="footer-icons" placement="top"
          ngbTooltip="This function will be available soon" style="cursor: not-allowed;opacity: 0.4;">
        <!-- <img src="../../assets/images/copy-footer.svg" alt="" class="footer-icons" placement="top" ngbTooltip="Add to clipboard" style="cursor: not-allowed;opacity: 0.4;"> -->
        <!-- <img src="../../assets/images/upload-footer.svg" alt="" class="footer-icons" placement="top" ngbTooltip="This function will be available soon" style="cursor: not-allowed;opacity: 0.4;"> -->
        <img src="../../assets/images/delete-footer.svg" alt="" class="footer-icons" placement="top"
          ngbTooltip="This function will be available soon" style="cursor: not-allowed;opacity: 0.4;width: 20px;">
      </div>
    </div>
  </div>

</section>