<div class="upload-modal">
   <mat-horizontal-stepper *ngIf="step !== 4" [linear]="true" #stepper>
      <mat-step [completed]="!checkUploadStep()">
         <ng-template matStepLabel>Select assets</ng-template>
         <!-- <div class="upload-modal-step">{{step !== 4 ? stepLabel : '' }}</div> -->
         <div>
            <ngx-dropzone #drop class="drag-drop" [accept]="'application/pdf,image/jpeg,image/jpg,image/png,image/gif,video/x-flv,video/mp4,application/x-mpegURL,video/x-m4v,video/x-msvideo,video/mpeg'" (change)="onSelect($event)">
            <ngx-dropzone-label  class="noborder">
               <div class="flexible" style="height: 250px;justify-content: center;position: relative;">
                  <div class="upload-label">
                     <span style="margin-top: 20px;"><img src="../../assets/images/cloud-upload.png" style="width: 36px; margin-right: 10px;"> <b>{{ !data ? 'Drag and drop assets to upload' : 'Drag and drop to upload assets to '}} </b></span>
                     <div *ngIf="data" class="uploadAssetsBlock">
                        <div class="folder-img">
                           <img src="../../assets/images/folder-icon.svg" style="width: 60px;margin: 0 14px 0 0;">
                        </div>
                        <div class="folder-content">
                           <div class="folderHeading">
                              {{shortTheString(data.title, 35)}}
                              <span>/{{WORKSPACE_ROOT}}{{shortTheString(sharedService.removeWrokspaceFromBreadcrumb(data.path), 70)}}</span>
                           </div>
                        </div>
                     </div>
                     <span>{{ !data ? 'or click to select files to upload' : 'or click to select assets to upload'}}</span>
                  </div>
                  <div class="errortext">
                     <span class="errorInfotxt goldenText">Images, videos and PDF documents only</span>
                     <!-- <p class="errorMsg">Only documents in PDF format are acceptable.<br>
                        Please make sure all the ducoments are converted into PDFs.</p> -->
                  </div>
               </div>
            </ngx-dropzone-label>
            <ul class="flexible upload-prevoew">
               <li  *ngFor="let f of filesMap | keyvalue">
                  <ngx-dropzone-preview class="upload-file-preview upload-progress-bar-{{f.key}}" [removable]="true" (removed)="onRemove(f)">
                  <ngx-dropzone-label class="flexible" style="margin: unset;">
                     <div style="width: 80%;text-align: left;margin-top: 0px;">
                        <p class="imgLabel">{{ shortTheString(f.value.name, 20) }}</p>
                        <span *ngIf="filesUploadDone[f.key]" class="imgSize">{{ humanFileSize(f.value.size) }}</span>
                        <span *ngIf="!filesUploadDone[f.key]" class="upload-loading">Uploading...</span>
                     </div>
                     <div *ngIf="filesUploadDone[f.key]" style="width: 20%; text-align: center;">
                        <img src="../../assets/images/BtnTickbox.png" style="float: right;">
                     </div>
                  </ngx-dropzone-label>
                  </ngx-dropzone-preview>
               </li>
            </ul>
            </ngx-dropzone>
            <div class="row pt-2" style="display: flex; align-items: baseline;">
               <div class="col-xl-3">
                  <div *ngIf="getAssetNumber()" class="flexible pt-3 pointer" style="align-items: end;" (click)="drop.showFileSelector()">
                  <a>
                  <img src="../../assets/images/addTags.svg" style="width: 20px;margin-right: 8px;">
                  </a>
                  <span class="goldenText">
                  Add more assets
                  </span>
               </div>
            </div>
            <div class="col-xl-9 flexible">
               <label class="control control--checkbox" *ngIf="getAssetNumber()" style="margin-bottom: 0px;">
                  Where any of the assets being uploaded contains a photo of a recognizable individual, I acknowledge that I have sought and received the consent of the person to store their photo and make accessible to other users across NEOM
                  <input type="checkbox" checked="checked"
                  [(ngModel)]="agreeTerms"
                  [ngModelOptions]="{standalone: true}"/>
                  <div class="control__indicator"></div>
               </label>
            </div>
         </div>
         </div>

         <div class="button-groups" style="padding-top: 15px;">
            <button (click)="closeModal()" class="cancel-btn">Cancel</button>
            <div class="progress-btns">
               <button mat-button matStepperNext class="upload-btn" [disabled]="checkUploadStep()">Next</button>
            </div>
         </div>
      </mat-step>

      <mat-step [completed]="!checkUploadFormStep()">
         <ng-template matStepLabel>Add information</ng-template>
         <div class="upload-form" id="customScrollBar" >
            <div  class="publish-assets">
               <div class="custompadding">
                  <ul class="flexible upload-prevoew">
                     <li  style="margin: unset;">
                        <div class="assets-selected"  >
                           <div class="flexible" style="margin: unset;">
                              <div style="width: 80%;text-align: left;margin-top: 0px;">
                                 <p class="assets-selected-text">{{ getSelectedAssetsTitle() }}</p>
                                 <span class="imgSize">{{ getTotalFileSize() }}</span>
                              </div>
                              <div style="width: 20%; text-align: center;">
                                 <img src="../../assets/images/BtnTickbox.png" style="float: right;">
                              </div>
                           </div>
                        </div>
                     </li>
                  </ul>
                  <div class="select-workspace">
                     <div class="select-workspace-menu row" style="width: 100%;">
                        <div class="col-xl-4 col-md-4">
                           <div class="menu-title">Workspace</div>
                        </div>
                        <div class="col-xl-8 col-md-8">
                           <div class="flexible">
                              <div class="workshaptitle">{{ selectedWorkspace.title || "Select workspace" }}</div>
                              <div class="select-workspace-menu-btn pointer" (click)="showWorkspaceList()" [ngClass]="{'disableDiv': data}" *ngIf="!data" >Change workspace</div>
                           </div>
                        </div>
                     </div>
                     <div *ngIf="showWsList" class="workspace-list">
                        <span class="triangle"></span>
                           <ngx-slick-carousel class="carousel" #slickModal="slick-carousel" [config]="slideConfig">
                                 <li ngxSlickItem  *ngFor="let ws of workspaceList, let i = index"  class="slide">
                                    <div class="workspace-title" [class.ws-selected]="selectedWorkspace.id === ws.id" (click)="selectWorkspace(ws)">{{ ws.title }}</div>
                                 </li>
                           </ngx-slick-carousel>
                           <!-- <div *ngFor="let ws of workspaceList, let i = index">
                              <div *ngIf="filterWorkspaces(ws.title)"
                                 class="workspace-title"
                                 [class.ws-selected]="selectedWorkspace.id === ws.id"
                                 (click)="selectWorkspace(ws)"
                                 >
                                 {{ ws.title }}
                              </div>
                           </div> -->
                     </div>
                  </div>
               </div>
            </div>

            <div class="row upload-form-input mb-10">
               <div class="col-xl-4 col-md-4">
                  <label for="title">Folder name<br>
                  <span style="font-size: 14px" *ngIf="!data">e.g. Title of project or event</span></label>
                  <div id='custom-select-status' class='hidden-visually' aria-live="polite"></div>
               </div>
               <div class="col-xl-8 col-md-8 flexible">
                  <div *ngIf="data" class="workshaptitle" style="padding-left: 0; margin-left: -2px;">{{folderNameParam}}</div>
                  <div *ngIf="!data" class="custom-select" id="myCustomSelect" [ngClass]="{'goldenText': selectedFolder?.title || folderToAdd || folderNameParam}">
                     <input type="text" id="title" #searchFolderInput [disabled]="data" value="{{folderToAdd || selectedFolder?.title}}" [(ngModel)]="folderNameParam" (input)="filterFolder($event)" (focus)="focusDropdown()" (focusout)="focusOutDropdown()" class="select-css"  placeholder="Enter a folder name or select an existing folder" >
                     <span class="custom-select-icons">
                     <i class="fa fa-caret-down"></i>
                     </span>
                     <ul *ngIf="showCustomDropdown" class="custom-select-options" id="custom-select-list">
                        <div style="min-height: 52px; max-height: 99px; overflow: auto;" id="customScrollBar">
                           <li *ngFor="let folder of dropdownFolderList" (click)="selectFolder(folder)" class="styled"><img src="../../assets/images/folderBlack.png" style="width: 18px; margin-right: 10px;">{{folder.title}}</li>
                           <li *ngIf="!dropdownFolderList || dropdownFolderList.length === 0"><span style="font-style: italic;">-No folder found-</span></li>
                        </div>
                        <!-- <li *ngIf="!showFolderNameField" class="styled yellowfix">
                           <div class="add-new-option">
                              <div class="flexible" (click)="showFolderNameField = true">
                                 <img src="../../assets/images/add-circle.svg" style="width: 18px; margin-right: 10px;" >
                                 <span>Create a new folder</span>
                              </div>
                           </div>
                        </li> -->
                        <li *ngIf="showCreateFolderButton(searchFolderInput.value)" class="styled yellowfix" (click)="addNewFolder(searchFolderInput)">
                           <div class="add-new-option">
                              <div class="flexible">
                                 <!-- <mat-icon>add</mat-icon> -->
                                 <img src="../../assets/images/add-circle.svg" style="width: 18px; margin-right: 10px;" >
                                 <span>Create folder "{{searchFolderInput.value}}"</span>
                              </div>
                              <!-- <mat-icon class="add-new-btn" (click)="addNewFolder(folderToAdd)">check</mat-icon> -->
                              <!-- <img src="../../assets/images/Shape.png" (click)="addNewFolder(folderToAdd)"> -->
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div class="tooltip1" *ngIf="!data">
                     <img src="../../assets/images/Info-icon.svg">
                     <span class="tooltiptext">Either select an exsiting folder by searching the keyword or name a new folder.</span>
                  </div>
                  <!-- <mat-icon class="info-icon" matTooltip="Select an existing folder or create a new folder">info</mat-icon> -->
               </div>
            </div>
            <div class="update-form-input row mb-20">
               <div class="col-xl-4 col-md-4"></div>
               <div [ngClass]="{'disableDiv': data}" class="col-xl-8 col-md-8">
                  <mat-accordion>
                     <mat-expansion-panel (opened)="panelOpenState = true"
                     (closed)="panelOpenState = false" >
                     <mat-expansion-panel-header class="set-width" *ngIf="!data">
                        <mat-panel-description class="goldenText mb-10" style="font-size: 14px !important; color: #937206 !important; font-weight: 600 !important;">
                           {{panelOpenState ? 'Hide' : 'Show'}} optional information
                        </mat-panel-description>
                     </mat-expansion-panel-header>
                     <div class="upload-form-input row mb-20">
                        <div class="col-xl-4 col-md-4">
                           <label for="title">Description <br><span style="font-size: 14px">(optional)</span></label>
                        </div>
                        <div class="col-xl-8 col-md-8"  [ngClass]="{'grayField': descriptionFilled}">
                           <textarea [disabled]="descriptionFilled" [(ngModel)]="description" id="title" name="Title" [ngClass]="{'goldenText': description }"></textarea>
                        </div>
                     </div>
                     <div class="row upload-form-input custom-date-picker mb-20">
                        <div class="col-xl-4 col-md-4">
                           <label for="date">Associated Date <br><span style="font-size: 14px">(optional)</span></label>
                        </div>
                        <div class="col-xl-8 col-md-8 flexible" [ngClass]="{'grayField': disableDateInput}">
                           <mat-form-field appearance="fill">
                              <!-- <mat-label>Choose a date</mat-label> -->
                              <!-- #docregion toggle -->
                              <input matInput [matDatepicker]="picker" style="width: 100%; border-bottom: 1.5px solid #000;"
                              placeholder="Choose a date" [(ngModel)]="associatedDate" (click)="picker.open()" [disabled]="disableDateInput" [ngClass]="{'goldenText': associatedDate}">
                              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                              <mat-datepicker #picker></mat-datepicker>
                              <!-- #enddocregion toggle -->
                           </mat-form-field>
                           <!-- <input id="date" [(ngModel)]="associatedDate" [matDatepicker]="myDatepicker" style="border-bottom: 1.5px solid #000;"> -->
                           <!-- <mat-datepicker-toggle [for]="myDatepicker"></mat-datepicker-toggle>
                              <mat-datepicker #myDatepicker></mat-datepicker> -->
                           <!-- <input type="date" id="start" name="trip-start" [(ngModel)]="associatedDate" style="border-bottom: 1.5px solid #000;"> -->
                           <!-- <input id="date" [(ngModel)]="associatedDate" [matDatepicker]="myDatepicker" style="border-bottom: 1.5px solid #000;">
                              <mat-datepicker-toggle [for]="myDatepicker"></mat-datepicker-toggle>
                              <mat-datepicker #myDatepicker></mat-datepicker> -->
                        </div>
                     </div>
                     </mat-expansion-panel>
                  </mat-accordion>
               </div>
            </div>
            <div class="upload-form-input row mb-30">
               <div class="col-xl-4 col-md-4">
                  <label for="confidentiality">Confidentiality</label>
               </div>
               <div class="col-xl-8 col-md-8 flexible">
                  <ng-select placeholder="Specify sensitivity"
                     (change)="onSelectConfidentiality($event)"
                     [searchable]="false"
                     [clearable]="false"
                     [(ngModel)]="confidentiality"
                     id="confidentiality"
                     [ngClass]="{'goldenText': confidentiality}"
                  >
                     <ng-option *ngFor="let c of CONFIDENTIALITY | keyvalue" [value]="c.value">
                        {{CONFIDENTIALITY_LABEL[c.value]}}
                     </ng-option>
                  </ng-select>
                  <!-- <select name="confidentiality" (change)="onSelectConfidentiality($event.target.value)" id="confidentiality" [ngClass]="{'goldenText': confidentiality }" >
                     <option value="" disabled selected hidden invalid >Specify sensitivity</option>
                     <option style="color: golden;" [selected]="confidentiality === c.value" *ngFor="let c of CONFIDENTIALITY | keyvalue" value="{{c.value}}">{{ c.value }}</option>
                     </select> -->
                  <!-- <button type="button" class=" mr-2" placement="left" ngbTooltip="Confidentiality can't be changed once the asset is published.">
                     <img src="../../assets/images/Info-icon.svg">
                     </button> -->
                  <!-- <button type="button" class="btn btn-outline-secondary mr-2" placement="left" ngbTooltip="Tooltip on left">
                     Tooltip on left
                     </button> -->
                  <!-- <mat-icon class="info-icon" matTooltip="Confidentiality can't be changed once the asset is published.">info</mat-icon> -->
                  <div class="tooltip1">
                     <img src="../../assets/images/Info-icon.svg">
                     <span class="tooltiptext">Ground X will classify the asset(s) as per the sensitivity specified.</span>
                  </div>
               </div>
            </div>
            <div class="upload-form-input row mb-30">
               <div class="col-xl-4 col-md-4">
                  <label for="access">Show to</label>
               </div>
               <div class="col-xl-8 col-md-8 flexible">
                  <ng-select placeholder="Specify visibility" [searchable]="false" [clearable]="false" (change)="onSelectAccess($event)" [(ngModel)]="access" id="access" [ngClass]="{'goldenText': access}">
                     <ng-option *ngFor="let c of ACCESS | keyvalue" [value]="c.value" [disabled]="checkAccessOptionDisabled(c.value)">
                     {{ACCESS_LABEL[c.value]}}
                     </ng-option>
                  </ng-select>
                  <!-- <select name="access" (change)="onSelectAccess($event.target.value)" id="access" [ngClass]="{'goldenText': access }" >
                     <option value="" disabled selected hidden invalid >Specify sensitivity</option>
                     <option [selected]="access === c.value" [disabled]="checkAccessOptionDisabled(c.value)" *ngFor="let c of ACCESS | keyvalue" value="{{c.value}}">{{ c.value }}</option>
                     </select> -->
                  <!-- <mat-icon class="info-icon" matTooltip="Acess rights can't be changed once the asset is published.">info</mat-icon> -->
                  <div class="tooltip1">
                     <img src="../../assets/images/Info-icon.svg">
                     <span class="tooltiptext">Ground X will only display the asset(s) to the specified users</span>
                  </div>
               </div>
            </div>
            <div *ngIf="checkShowUserDropdown()" class="upload-form-input row mb-30">
               <div class="col-xl-4 col-md-4">
                  <!-- <label for="user">Users</label> -->
               </div>
               <div class="col-xl-8 col-md-8">
                  <p class="userText pb-2">{{SPECIFIC_USER_LABEL}}</p>
                  <ng-select style="height: unset !important;"
                  [items]="userList$ | async"
                  bindLabel="id"
                  bindValue="id"
                  [multiple]="true"
                  [hideSelected]="true"
                  [trackByFn]="trackByFn"
                  [minTermLength]="2"
                  [loading]="userLoading"
                  typeToSearchText="Search users"
                  [typeahead]="userInput$"
                  [(ngModel)]="selectedUsers"
                  [ngClass]="{'goldenText': selectedUsers }" >
                  <ng-template ng-option-tmp let-item="item">
                     {{item.id}} ({{item.fullname}})
                  </ng-template>
                  </ng-select>
               </div>
            </div>
            <div class="upload-form-input row mb-30">
               <div class="col-xl-4 col-md-4">
                  <label for="allow">Allow use</label>
               </div>
               <div class="col-xl-8 col-md-8 flexible">
                  <ng-select placeholder="Specify permissible usage" [searchable]="false" [clearable]="false" (change)="onSelectAllow($event)" [(ngModel)]="allow" id="allow" [ngClass]="{'goldenText': allow}">
                  <ng-option *ngFor="let c of ALLOW | keyvalue" [value]="c.value" [disabled]="checkAccessOptionDisabled(c.value)">
                     {{ALLOW_LABEL[c.value]}}
                  </ng-option>
                  </ng-select>
                  <div class="tooltip1">
                     <img src="../../assets/images/Info-icon.svg">
                     <span class="tooltiptext">Ground X advises users of permissible usage as specified here. You may also choose to give your permission for each download request.</span>
                  </div>
               </div>
            </div>
            <div *ngIf="checkOwnerDropdown()" class="upload-form-input row mb-30">
               <div class="col-xl-4 col-md-4">
                  <!-- <label for="user">Users</label> -->
               </div>
               <!-- <div class="col-xl-3 col-md-3">
                  <label for="date">Please specific <br><span style="font-size: 14px">the owner</span></label>
               </div> -->
               <div class="col-xl-8 col-md-8">
                  <p class="userText pb-2">{{OWNER_APPROVAL_LABEL}}</p>
                  <ng-select style="height: unset !important;"
                  [items]="userList$ | async"
                  bindLabel="id"
                  bindValue="id"
                  [multiple]="false"
                  [hideSelected]="true"
                  [trackByFn]="trackByFn"
                  [minTermLength]="2"
                  [loading]="userLoading"
                  typeToSearchText="Search users"
                  [typeahead]="userInput$"
                  [(ngModel)]="ownerName"
                  [ngClass]="{'goldenText': ownerName }" >
                  <ng-template ng-option-tmp let-item="item">
                     {{item.id}} ({{item.fullname}})
                  </ng-template>
                  </ng-select>
               </div>
            </div>
         </div>

         <div class="button-groups" style="padding-top: 15px;">
            <button (click)="closeModal()" class="cancel-btn">Cancel</button>
            <div class="progress-btns">
               <button mat-button matStepperPrevious class="cancel-btn">Back</button>
               <button mat-button matStepperNext class="upload-btn" (click)="copyUserMap()" [disabled]="checkUploadFormStep()">Review</button>
            </div>
         </div>
      </mat-step>

      <mat-step>
         <ng-template matStepLabel >Publish assets</ng-template>
         <div>
            <div>Please review the classifications of the uploaded files.</div>
            <div class="publish-summary">
               <!-- <span>{{ getSelectedAssetsTitle() }}</span> -->
               <div class="assets-details">
                  <div class="flexible">
                     <img src="../../assets/images/upload.png">
                     <!-- <mat-icon>folder</mat-icon> -->
                     <span style="margin-left: 10px; display: block;">{{ folderToAdd || selectedFolder?.title || data?.title }}</span>
                  </div>
               </div>
               <div class="publish-summary-location flexible">
                  <div *ngIf="associatedDate" style="margin-left: 20px;">
                     <!-- <mat-icon>calendar_today</mat-icon> -->
                     <img src="../../assets/images/calendar.png" style="vertical-align: top;">
                     <span style="margin-left: 6px; display: inline-block;">{{ showLocaleDate(associatedDate) }}</span>
                  </div>
               </div>
            </div>
            <div class="publish-file-preview-groups fix-scroll" id="customScrollBar">
               <div *ngFor="let file of filesMap | keyvalue" class="publish-file-preview">
                  <div class="publish-file-preview-img">
                     <img [src]="imageSrc[file.key] || getPreviewSrc(file.value, file.key)" alt="preview" class="preview-img"
                        onerror="this.src='./assets/images/preview-placeholder.png';"/>
                     <span class="tollTipCustom" >
                        {{ sharedService.stringShortener(file.value.name, 20) }}
                        <div class="tolltipContent">
                           {{file.value.name}}
                         </div>
                        <br/><br/>
                        <span>{{ humanFileSize(file.value.size) }}</span>
                     </span>
                     <div class="copyright-information">
                        <div (click)="openCopyright(file.key)" *ngIf="!openCopyrightMap[file.key]">
                           <img src="../../assets/images/add-copyright-golden.svg" alt="Add copyright information" /> Add copyright information
                        </div>
                        <div *ngIf="openCopyrightMap[file.key]" (click)="closeCopyright(file.key)" [ngClass]="{'collapseInformationLink': openCopyrightMap[file.key]}">
                           <img src="../../assets/images/add-circle-brown.svg" alt="Collapse optional information" class="collapse-img" /> Collapse optional information
                        </div>
                        <!-- <div *ngIf="openCopyrightMap[file.key]" class="copyright-form">
                           <ul>
                              <li>
                                 <img (click)="closeCopyright(file.key)" src="../../assets/images/add-circle-brown.svg" alt="Copyright Owner" />
                              </li>
                              <li [ngClass]="{'goldenText':copyrightUserMap[file.key] }">
                                 <div class="copyright-input-block" >
                                    â’¸ <input type="text" placeholder="Copyright Owner" [(ngModel)]="copyrightUserMap[file.key]" class="copyright-input" >
                                 </div>
                              </li>
                              <li>
                                 <ng-select [items]="years" class="yearssss" [searchable]="false" [clearable]="false"
                                    bindLabel="name"
                                    [(ngModel)]="copyrightYearMap[file.key]"
                                    placeholder="Year" ngDefaultControl
                                    [ngClass]="{'goldenText': copyrightYearMap[file.key] }"
                                 >
                                 </ng-select>
                              </li>
                           </ul>
                        </div> -->
                     </div>
                  </div>
                  <div class="publish-file-preview-access">
                     <div class="upload-form-input row mb-20">
                        <div class="col-xl-4">
                           <label for="confidentiality">Confidentiality</label>
                        </div>
                        <div class="col-xl-8 ">
                           <!-- <select name="confidentiality" (change)="onSelectConfidentiality($event.target.value, file.key)" id="confidentiality" [ngClass]="{'goldenText': confidentiality }" >
                              <option [selected]="confidentiality === c.value" *ngFor="let c of CONFIDENTIALITY | keyvalue" value="{{c.value}}">{{ c.value }}</option>
                              </select> -->
                           <ng-select (change)="onSelectConfidentiality($event, file.key)" [searchable]="false" [clearable]="false" name="confidentiality" id="confidentiality" [ngModel]="confidentiality"  [ngClass]="{'goldenText': confidentiality }">
                           <ng-option  *ngFor="let c of CONFIDENTIALITY | keyvalue" value="{{c.value}}">{{ CONFIDENTIALITY_LABEL[c.value] }}
                           </ng-option>
                           </ng-select>
                        </div>
                     </div>
                     <div class="upload-form-input row mb-20">
                        <div class="col-xl-4">
                           <label for="access">Show to</label>
                        </div>
                        <div class="col-xl-8">
                           <ng-select placeholder="Specify visibility" name="access" (change)="onSelectAccess($event, file.key)" [searchable]="false" [clearable]="false" id="access" [(ngModel)]="customAccessMap[file.key]" [ngClass]="{'goldenText': customAccessMap[file.key] }" >
                              <ng-option   [disabled]="checkAccessOptionDisabled(c.value, file.key)" *ngFor="let c of ACCESS | keyvalue" value="{{c.value}}">{{ ACCESS_LABEL[c.value] }}
                              </ng-option>
                           </ng-select>
                        </div>
                     </div>
                     <div *ngIf="checkShowUserDropdown(file.key)" class="upload-form-input row mb-20" style="display: flex;">
                        <div class="col-xl-4">
                           <label for="user">Users</label>
                        </div>
                        <div class="col-xl-8">
                           <ng-select style="height: unset !important;"
                           [items]="userList$ | async"
                           bindLabel="id"
                           bindValue="id"
                           [multiple]="true"
                           [hideSelected]="true"
                           [trackByFn]="trackByFn"
                           [minTermLength]="2"
                           [loading]="userLoading"
                           typeToSearchText="Search users"
                           [typeahead]="userInput$"
                           [(ngModel)]="customUsersMap[file.key]"
                           [ngClass]="{'goldenText': customUsersMap[file.key] }" >
                           <ng-template ng-option-tmp let-item="item">
                              {{item.id}} ({{item.fullname}})
                           </ng-template>
                           </ng-select>
                        </div>
                     </div>
                     <div class="upload-form-input row mb-20">
                        <div class="col-xl-4">
                           <label for="allow">Allow use</label>
                        </div>
                        <div class="col-xl-8">
                           <!-- <select name="allow" (change)="onSelectAllow($event.target.value, file.key)" id="allow" [ngClass]="{'goldenText': allow }" >
                              <option [selected]="allow === c.value" *ngFor="let c of ALLOW | keyvalue" value="{{c.value}}">{{ c.value }}</option>
                              </select> -->
                           <ng-select placeholder="Specify permissible usage" name="allow" (change)="onSelectAllow($event, file.key)" id="allow" [searchable]="false" [clearable]="false" [(ngModel)]="customAllowMap[file.key]" [ngClass]="{'goldenText': customAllowMap[file.key] }" >
                              <ng-option  *ngFor="let c of ALLOW | keyvalue" value="{{c.value}}" [disabled]="checkAccessOptionDisabled(c.value)">{{ ALLOW_LABEL[c.value] }}
                              </ng-option>
                           </ng-select>
                        </div>
                     </div>
                     <div *ngIf="checkOwnerDropdown()" class="upload-form-input row mb-20">
                        <div class="col-xl-4">
                           <label for="user">Owner</label>
                        </div>
                        <div class="col-xl-8">
                           <!-- <p class="userText pb-2">Please specific the owner</p> -->
                           <ng-select style="height: unset !important;"
                           [items]="userList$ | async"
                           bindLabel="id"
                           bindValue="id"
                           [multiple]="false"
                           [hideSelected]="true"
                           [trackByFn]="trackByFn"
                           [minTermLength]="2"
                           [loading]="userLoading"
                           typeToSearchText="Search users"
                           [typeahead]="userInput$"
                           [(ngModel)]="ownerName"
                           [ngClass]="{'goldenText': ownerName }" >
                           <ng-template ng-option-tmp let-item="item">
                              {{item.id}} ({{item.fullname}})
                           </ng-template>
                           </ng-select>
                        </div>
                     </div>

                     <div *ngIf="openCopyrightMap[file.key]" class="collapseInformation">
                        <div class="upload-form-input row mb-20">
                           <div class="col-xl-4 col-md-4">
                              <label for="title">Description <br><span class="optionalText">(optional)</span></label>
                           </div>
                           <div class="col-xl-8 col-md-8">
                              <textarea [(ngModel)]="description" id="title" name="Title" [ngClass]="{'goldenText': description }" style="width: 100%;"></textarea>
                           </div>
                        </div>
                        <div class="row upload-form-input custom-date-picker mb-20">
                           <div class="col-xl-4 col-md-4" style="text-align: right;">
                              <label for="date">Associated Date <br><span class="optionalText">(optional)</span></label>
                           </div>
                           <div class="col-xl-8 col-md-8 flexible">
                              <mat-form-field appearance="fill">
                                 <!-- #docregion toggle -->
                                 <input matInput [matDatepicker]="picker" style="width: 100%; border-bottom: 1.5px solid #000;"
                                 placeholder="Choose a date" [(ngModel)]="associatedDate" (click)="picker.open()"  [ngClass]="{'goldenText': associatedDate}">
                                 <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                 <mat-datepicker #picker></mat-datepicker>
                                 <!-- #enddocregion toggle -->
                              </mat-form-field>
                           </div>
                        </div>

                        <div class="upload-form-input row mb-20" >
                           <div class="col-xl-4">
                              <label for="access" style="text-align: right;">
                                 Copyright Information
                                 <span class="optionalText">(optional)</span>
                              </label>
                           </div>
                           <div class="col-xl-8">
                              <ul class="optionalInformationDate">
                                 <li [ngClass]="{'goldenText':copyrightUserMap[file.key] }" style="position: relative;">
                                    <div class="copyright-input-block" >
                                       <svg width="15" height="14" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="copyrightGolden" style="margin-top: 1px;">
                                          <path d="M12.3477 4.97656L11.4102 6.19531C10.707 5.64062 9.98438 5.36328 9.24219 5.36328C8.41406 5.36328 7.72656 5.66016 7.17969 6.25391C6.64062 6.84766 6.37109 7.60547 6.37109 8.52734C6.37109 9.44141 6.64844 10.2031 7.20312 10.8125C7.76562 11.4141 8.49609 11.7148 9.39453 11.7148C9.86328 11.7148 10.2695 11.6406 10.6133 11.4922C10.957 11.3438 11.3086 11.1328 11.668 10.8594L12.6055 12.1016C11.6445 12.9375 10.5586 13.3555 9.34766 13.3555C7.96484 13.3555 6.82812 12.8945 5.9375 11.9727C5.05469 11.043 4.61328 9.89453 4.61328 8.52734C4.61328 7.16797 5.05469 6.02734 5.9375 5.10547C6.82031 4.18359 7.92188 3.72266 9.24219 3.72266C10.3828 3.72266 11.418 4.14062 12.3477 4.97656ZM1.34375 11.8555C0.898438 10.8164 0.675781 9.73047 0.675781 8.59766C0.675781 7.46484 0.898438 6.37891 1.34375 5.33984C1.78906 4.30078 2.38672 3.40625 3.13672 2.65625C3.88672 1.90625 4.78125 1.30859 5.82031 0.863281C6.85938 0.417969 7.94531 0.195312 9.07812 0.195312C10.2109 0.195312 11.2969 0.417969 12.3359 0.863281C13.375 1.30859 14.2695 1.90625 15.0195 2.65625C15.7695 3.40625 16.3672 4.30078 16.8125 5.33984C17.2578 6.37891 17.4805 7.46484 17.4805 8.59766C17.4805 9.73047 17.2578 10.8164 16.8125 11.8555C16.3672 12.8945 15.7695 13.7891 15.0195 14.5391C14.2695 15.2891 13.375 15.8867 12.3359 16.332C11.2969 16.7773 10.2109 17 9.07812 17C7.94531 17 6.85938 16.7773 5.82031 16.332C4.78125 15.8867 3.88672 15.2891 3.13672 14.5391C2.38672 13.7891 1.78906 12.8945 1.34375 11.8555ZM3.14844 5.17578C2.53906 6.22266 2.23438 7.36328 2.23438 8.59766C2.23438 9.83203 2.53906 10.9727 3.14844 12.0195C3.75781 13.0664 4.58594 13.8945 5.63281 14.5039C6.67969 15.1133 7.82031 15.418 9.05469 15.418C10.2891 15.418 11.4297 15.1172 12.4766 14.5156C13.5312 13.9062 14.3633 13.0781 14.9727 12.0312C15.5898 10.9766 15.8984 9.83203 15.8984 8.59766C15.8984 7.36328 15.5898 6.22266 14.9727 5.17578C14.3633 4.12109 13.5312 3.28906 12.4766 2.67969C11.4297 2.07031 10.2891 1.76562 9.05469 1.76562C7.82031 1.76562 6.67969 2.07031 5.63281 2.67969C4.58594 3.28906 3.75781 4.12109 3.14844 5.17578Z" fill="#040404"/>
                                       </svg> <input type="text" placeholder="Copyright Owner" [(ngModel)]="copyrightUserMap[file.key]" class="copyright-input optional-information" >
                                    </div>
                                 </li>
                                 <li>
                                    <ng-select [items]="years" class="yearssss" [searchable]="false" [clearable]="false"
                                       bindLabel="name"
                                       [(ngModel)]="copyrightYearMap[file.key]"
                                       placeholder="Year" ngDefaultControl
                                       [ngClass]="{'goldenText': copyrightYearMap[file.key] }"
                                    >
                                    </ng-select>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>

                  </div>
               </div>
            </div>
         </div>

         <div class="button-groups" style="padding-top: 15px;">
            <button (click)="closeModal()" class="cancel-btn">Cancel</button>
            <div class="progress-btns">
               <button mat-button matStepperPrevious class="cancel-btn">Back</button>
               <button mat-button matStepperNext class="upload-btn" (click)="publish()">Publish</button>
            </div>
         </div>
      </mat-step>
   </mat-horizontal-stepper>
<!-- <div class="flexible pt-3">
   <a>
      <img src="../../assets/images/addTags.svg" style="width: 20px;margin-right: 8px;">
   </a>
   <span class="goldenText">
      Add more assets
   </span>
   </div> -->
<!-- todo -->
<div *ngIf="step === 4">
   <div class="finish-screen">
      <!-- <mat-icon>upload</mat-icon> -->
      <span>Your assets have been successfully published on Ground X.</span>
      <div *ngIf="showRedirectUrl()" class="destination-folder-block" (click)="openBrowseRoute()" style="cursor: pointer;">
         <div class="destination-img-block">
            <img src="../../../assets/images/yellow-folder.png" style="max-width: 100%;">
         </div>
         <div class="destination-content-block">
            <span class="assetName" style="width: 100%;text-align: left; display: block;">{{ folderToAdd || selectedFolder?.title }}</span>
            <p class="numberAssets">{{ getAssetNumber() }} assets</p>
         </div>
      </div>
      <div (click)="closeModal()" class="close-modal">
         <!-- <mat-icon>close</mat-icon> -->
         Close
      </div>
   </div>
</div>
<!-- <div class="button-groups" *ngIf="step !== 4">
   <button (click)="closeModal()" class="cancel-btn">Cancel</button>
   <div class="progress-btns">
      <button class="cancel-btn" *ngIf="step > 1" (click)="toPreviousStep()">Back</button>
      <button class="upload-btn" [disabled]="checkButtonDisabled()" (click)="toNextStep()">{{ buttonLabel }}</button>
   </div>
</div> -->
</div>